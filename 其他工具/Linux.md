# 入门



## 1. 目录介绍

> 登录系统后，在当前命令窗口下输入命令：ls /	
>
> 查看所有目录

- **/bin**：bin是Binary的缩写, 这个目录存放着最经常使用的命令。
- **/boot：** 这里存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。（不要动！！！）
- **/dev ：** dev是Device(设备)的缩写, 存放的是Linux的外部设备，在Linux中访问设备的方式和访问文件的方式是相同的。
- **/etc：** 这个目录用来存放所有的系统管理所需要的配置文件和子目录。
- **/home**：用户的主目录，在Linux中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。
- **/lib**：这个目录里存放着系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件。
- **/lost+found**：这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。
- **/media**：linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后，linux会把识别的设备挂载到这个目录下。
- **/mnt**：系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在/mnt/上，然后进入该目录就可以查看光驱里的内容了。
- **/opt**：这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。
- **/proc**：这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。
- **/root**：该目录为系统管理员，也称作超级权限者的用户主目录。
- **/sbin**：s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序。
- **/srv**：该目录存放一些服务启动之后需要提取的数据。
- **/sys**：这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统 sysfs 。
- **/tmp**：这个目录是用来存放一些临时文件的。
- **/usr**：这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program files目录。
- **/usr/bin：** 系统用户使用的应用程序。
- **/usr/sbin：** 超级用户使用的比较高级的管理程序和系统守护程序。
- **/usr/src：** 内核源代码默认的放置目录。
- **/var**：这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。
- **/run**：是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。



## 2. 常用命令

### 2.1 目录管理

```
cd	切换目录
cd ..	返回上一级目录
```

```
ls	列出目录
-a参数	查看全部文件，包括隐藏文件
-l参数	长数据串列出，包含文件的属性与权限等等数据，不包括隐藏文件
```

```
pwd	查看当前用户所在目录
```

```
-p	代表多层创建与删除

mkdir (-p)	创建新目录
rmdir (-p)	删除目录
cp 原来的地方 新的地方
```

```
rm	删除文件或目录

-f ：就是 force 的意思，忽略不存在的文件，不会出现警告信息；
-i ：互动模式，在删除前会询问使用者是否动作
-r ：递归删除啊！最常用在目录的删除了！这是非常危险的选项！！！
```

```
mv	移动文件与目录，或修改名称

-f ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；
-i ：若目标文件 (destination) 已经存在时，就会询问是否覆盖！
-u ：若目标文件已经存在，且 source 比较新，才会升级 (update)
```

 



### 2.2 文件属性

```
0123456789
drwxr-xr-x
第0位确定文件类型，第1-3位确定属主（该文件的所有者）拥有该文件的权限。第4-6位确定属组（所有者的同组用户）拥有该文件的权限，第7-9位确定其他用户拥有该文件的权限。

第1、4、7位表示读权限，如果用"r"字符表示，则有读权限，如果用"-"字符表示，则没有读权限；
第2、5、8位表示写权限，如果用"w"字符表示，则有写权限，如果用"-"字符表示没有写权限；
第3、6、9位表示可执行权限，如果用"x"字符表示，则有执行权限，如果用"-"字符表示，则没有执行权限。
```



```
chgrp：更改文件属组
chgrp [-R] 属组名 文件名
-R：递归更改文件属组，就是在更改某个目录文件的属组时，如果加上-R的参数，那么该目录下的所有文件的属组都会更改。


chown：更改文件属主，也可以同时更改文件属组
chown [–R] 属主名 文件名
chown [-R] 属主名：属组名 文件名
```

> 重点！！！

```
chmod：更改文件9个属性
```

数字更改

```
r:4     w:2         x:1
```





### 2.3 文件内容查看

> 你可以使用 *man [命令]*来查看各个命令的使用文档，如 ：man cp。

```
Linux系统中使用以下命令来查看文件的内容：

cat 由第一行开始显示文件内容
tac 从最后一行开始显示，可以看出 tac 是 cat 的倒着写！
nl  显示的时候，顺道输出行号！
more 一页一页的显示文件内容
less 与 more 类似，但是比 more 更好的是，他可以往前翻页！
head 只看头几行
tail 只看尾巴几行
```



1. cat

   ```
   cat [-AbEnTv]
   ```

   选项与参数：

   - -A ：相当於 -vET 的整合选项，可列出一些特殊字符而不是空白而已；
   - -b ：列出行号，仅针对非空白行做行号显示，空白行不标行号！
   - -E ：将结尾的断行字节 $ 显示出来；
   - -n ：列印出行号，连同空白行也会有行号，与 -b 的选项不同；
   - -T ：将 [tab] 按键以 ^I 显示出来；
   - -v ：列出一些看不出来的特殊字符

2. tac

   与cat相反

3. nl  显示行号

   ```
   nl [-bnw] 文件
   ```

   选项与参数：

   - -b ：指定行号指定的方式，主要有两种：-b a ：表示不论是否为空行，也同样列出行号(类似 cat -n)；-b t ：如果有空行，空的那一行不要列出行号(默认值)；
   - -n ：列出行号表示的方法，主要有三种：-n ln ：行号在荧幕的最左方显示；-n rn ：行号在自己栏位的最右方显示，且不加 0 ；-n rz ：行号在自己栏位的最右方显示，且加 0 ；
   - -w ：行号栏位的占用的位数。

4. more  一页一页翻动

   在 more 这个程序的运行过程中，你有几个按键可以按的：

   - 空白键 (space)：代表向下翻一页；
   - Enter   ：代表向下翻『一行』；
   - /字串   ：代表在这个显示的内容当中，向下搜寻『字串』这个关键字；
   - :f    ：立刻显示出档名以及目前显示的行数；
   - q    ：代表立刻离开 more ，不再显示该文件内容。
   - b 或 [ctrl]-b ：代表往回翻页，不过这动作只对文件有用，对管线无用。

5. less  一页一页翻动，以下实例输出/etc/man.config文件的内容

   less运行时可以输入的命令有：

   - 空白键  ：向下翻动一页；
   - [pagedown]：向下翻动一页；
   - [pageup] ：向上翻动一页；
   - /字串  ：向下搜寻『字串』的功能；
   - ?字串  ：向上搜寻『字串』的功能；
   - n   ：重复前一个搜寻 (与 / 或 ? 有关！)
   - N   ：反向的重复前一个搜寻 (与 / 或 ? 有关！)
   - q   ：离开 less 这个程序；

6. head  取出文件前面几行

   ```
   head [-n number] 文件
   ```

   选项与参数：**-n** 后面接数字，代表显示几行的意思！

   默认的情况中，显示前面 10 行！若要显示前 20 行，就得要这样：

   ```
   [root@kuangshen etc]# head -n 20 /etc/csh.login
   ```

7. tail  取出文件后面几行

   ```
   tail [-n number] 文件
   ```

   选项与参数：

   - -n ：后面接数字，代表显示几行的意思

   默认的情况中，显示最后 10 行！若要显示最后 20 行，就得要这样：

   ```
   [root@kuangshen etc]# tail -n 20 /etc/csh.login
   ```





### 2.4 硬链接与软链接







## 3. vim使用

### 3.1 入门

1. 如果你想要使用 vi 来建立一个名为 kuangstudy.txt 的文件时，你可以这样做：

   ```
   [root@kuangshen home]# vim kuangstudy.txt
   ```

2. **按下 i 进入输入模式(也称为编辑模式)，开始编辑文字**

   在一般模式之中，只要按下 i, o, a 等字符就可以进入输入模式了！

   在编辑模式当中，你可以发现在左下角状态栏中会出现 –INSERT- 的字样，那就是可以输入任意字符的提示。

   这个时候，键盘上除了 **Esc** 这个按键之外，其他的按键都可以视作为一般的输入按钮了，所以你可以进行任何的编辑。

3. **按下 ESC 按钮回到一般模式**

   好了，假设我已经按照上面的样式给他编辑完毕了，那么应该要如何退出呢？是的！没错！就是给他按下 **Esc** 这个按钮即可！马上你就会发现画面左下角的 – INSERT – 不见了！

   在一般模式中按下 **:wq** 储存后离开 vim！



3.2 一般模式的按键

1. 方向键（略）

2. [Ctrl] + [f]   屏幕『向下』移动一页，相当于 [Page Down]按键

   [Ctrl] + [b]   屏幕『向上』移动一页，相当于 [Page Up] 按键

   [Ctrl] + [d]   屏幕『向下』移动半页

   [Ctrl] + [u]   屏幕『向上』移动半页

3. 功能键[Home]   移动到这一行的最前面字符处

   功能键[End]    移动到这一行的最后面字符处

4. | H    | 光标移动到这个屏幕的最上方那一行的第一个字符 |
   | ---- | -------------------------------------------- |
   | M    | 光标移动到这个屏幕的中央那一行的第一个字符   |
   | L    | 光标移动到这个屏幕的最下方那一行的第一个字符 |
   | G    | 移动到这个档案的最后一行(常用)               |

   | nG        | n 为数字。移动到这个档案的第 n 行。例如 20G 则会移动到这个档案的第 20 行(可配合 :set nu) |
   | --------- | ------------------------------------------------------------ |
   | gg        | 移动到这个档案的第一行，相当于 1G 啊！(常用)                 |
   | n< Enter> | n 为数字。光标向下移动 n 行(常用)                            |





 5. 搜索

    | /word | 向光标之下寻找一个名称为 word 的字符串。例如要在档案内搜寻 vbird 这个字符串，就输入 /vbird 即可！(常用) |
    | ----- | ------------------------------------------------------------ |
    | ?word | 向光标之上寻找一个字符串名称为 word 的字符串。               |
    | n     | 这个 n 是英文按键。代表重复前一个搜寻的动作。举例来说， 如果刚刚我们执行 /vbird 去向下搜寻 vbird 这个字符串，则按下 n 后，会向下继续搜寻下一个名称为 vbird 的字符串。如果是执行 ?vbird 的话，那么按下 n 则会向上继续搜寻名称为 vbird 的字符串！ |
    | N     | 这个 N 是英文按键。与 n 刚好相反，为『反向』进行前一个搜寻动作。例如 /vbird 后，按下 N 则表示『向上』搜寻 vbird 。 |



6. 删除

   | x, X | 在一行字当中，x 为向后删除一个字符 (相当于 [del] 按键)， X 为向前删除一个字符(相当于 [backspace] 亦即是退格键) (常用) |
   | ---- | ------------------------------------------------------------ |
   | nx   | n 为数字，连续向后删除 n 个字符。举例来说，我要连续删除 10 个字符， 『10x』。 |
   | dd   | 删除游标所在的那一整行(常用)                                 |
   | ndd  | n 为数字。删除光标所在的向下 n 行，例如 20dd 则是删除 20 行 (常用) |



7. 复制

   | yy   | 复制游标所在的那一行(常用)                                   |
   | ---- | ------------------------------------------------------------ |
   | nyy  | n 为数字。复制光标所在的向下 n 行，例如 20yy 则是复制 20 行(常用) |





### 3.3 一般模式切换到编辑模式

| i, I  | 进入输入模式(Insert mode)：i 为『从目前光标所在处输入』， I 为『在目前所在行的第一个非空格符处开始输入』。(常用) |
| ----- | ------------------------------------------------------------ |
| a, A  | 进入输入模式(Insert mode)：a 为『从目前光标所在的下一个字符处开始输入』， A 为『从光标所在行的最后一个字符处开始输入』。(常用) |
| o, O  | 进入输入模式(Insert mode)：这是英文字母 o 的大小写。o 为『在目前光标所在的下一行处输入新的一行』；O 为在目前光标所在处的上一行输入新的一行！(常用) |
| r, R  | 进入取代模式(Replace mode)：r 只会取代光标所在的那一个字符一次；R会一直取代光标所在的文字，直到按下 ESC 为止；(常用) |
| [Esc] | 退出编辑模式，回到一般模式中(常用)                           |



### 3.4 一般模式切换到指令行模式

| :w                  | 将编辑的数据写入硬盘档案中(常用)                             |
| ------------------- | ------------------------------------------------------------ |
| :w!                 | 若文件属性为『只读』时，强制写入该档案。不过，到底能不能写入， 还是跟你对该档案的档案权限有关啊！ |
| :q                  | 离开 vi (常用)                                               |
| :q!                 | 若曾修改过档案，又不想储存，使用 ! 为强制离开不储存档案。    |
| :wq                 | 储存后离开，若为 :wq! 则为强制储存后离开 (常用)              |
| ZZ                  | 这是大写的 Z 喔！若档案没有更动，则不储存离开，若档案已经被更动过，则储存后离开！ |
| :w [filename]       | 将编辑的数据储存成另一个档案（类似另存新档）                 |
| :r [filename]       | 在编辑的数据中，读入另一个档案的数据。亦即将 『filename』 这个档案内容加到游标所在行后面 |
| :n1,n2 w [filename] | 将 n1 到 n2 的内容储存成 filename 这个档案。                 |
| :! command          | 暂时离开 vi 到指令行模式下执行 command 的显示结果！例如 『:! ls /home』即可在 vi 当中看 /home 底下以 ls 输出的档案信息！ |
| :set nu             | 显示行号，设定之后，会在每一行的前缀显示该行的行号           |
| :set nonu           | 与 set nu 相反，为取消行号！                                 |





## 4. 账号管理

> 用户账号的管理

用户账号的管理工作主要涉及到用户账号的添加、修改和删除。

添加用户账号就是在系统中创建一个新账号，然后为新账号分配用户号、用户组、主目录和登录Shell等资源。



### 4.1 添加账号

```
useradd 选项 用户名
```

```
参数说明：

选项 :

-c comment 指定一段注释性描述。
-d 目录 指定用户主目录，如果此目录不存在，则同时使用-m选项，可以创建主目录。
-g 用户组 指定用户所属的用户组。
-G 用户组，用户组 指定用户所属的附加组。
-m　使用者目录如不存在则自动建立。
-s Shell文件 指定用户的登录Shell。
-u 用户号 指定用户的用户号，如果同时有-o选项，则可以重复使用其他用户的标识号。

用户名 :
指定新账号的登录名。
```



测试：

```
# 此命令创建了一个用户kuangshen，其中-m选项用来为登录名kuangshen产生一个主目录 /home/kuangshen

[root@kuangshen home]# useradd -m kuangshen
```

增加用户账号就是在/etc/passwd文件中为新用户增加一条记录，同时更新其他系统文件如/etc/shadow, /etc/group等。



### 4.2 Linux下如何切换用户

1. 换用户的命令为：su username 【username是你的用户名哦】

2. 普通用户切换到root用户，还可以使用命令：sudo su

3. 终端输入exit或logout或使用快捷方式ctrl+d，可以退回到原来用户，其实ctrl+d也是执行的exit命令

4. 切换用户时，如果想在切换用户之后使用新用户的工作环境，可以在su和username之间加-，例如：【su - root】

   

   $表示普通用户

   \#表示超级用户，也就是root用户



### 4.3 删除账号

如果一个用户的账号不再使用，可以从系统中删除。

删除用户账号就是要将/etc/passwd等系统文件中的该用户记录删除，必要时还删除用户的主目录。



删除一个已有的用户账号使用userdel命令，其格式如下：

```
userdel 选项 用户名
```

常用的选项是 **-r**，它的作用是把用户的主目录一起删除。

```
[root@kuangshen home]# userdel -r kuangshen
```

此命令删除用户kuangshen在系统文件中（主要是/etc/passwd, /etc/shadow, /etc/group等）的记录，同时删除用户的主目录。



### 4.4 修改账号

修改用户账号就是根据实际情况更改用户的有关属性，如用户号、主目录、用户组、登录Shell等。



修改已有用户的信息使用usermod命令，其格式如下：

```
usermod 选项 用户名
```

常用的选项包括-c, -d, -m, -g, -G, -s, -u以及-o等，这些选项的意义与useradd命令中的选项一样，可以为用户指定新的资源值。

例如：

```
# usermod -s /bin/ksh -d /home/z –g developer kuangshen
```

此命令将用户kuangshen的登录Shell修改为ksh，主目录改为/home/z，用户组改为developer。





### 4.5 用户口令的管理

用户管理的一项重要内容是用户口令的管理。用户账号刚创建时没有口令，但是被系统锁定，无法使用，必须为其指定口令后才可以使用，即使是指定空口令。

指定和修改用户口令的Shell命令是passwd。超级用户可以为自己和其他用户指定口令，普通用户只能用它修改自己的口令。



命令的格式为：

```
passwd 选项 用户名
```

可使用的选项：

- -l 锁定口令，即禁用账号。
- -u 口令解锁。
- -d 使账号无口令。
- -f 强迫用户下次登录时修改口令。

如果默认用户名，则修改当前用户的口令。





例如，假设当前用户是kuangshen，则下面的命令修改该用户自己的口令：

```
$ passwd
Old password:******
New password:*******
Re-enter new password:*******
```

如果是超级用户，可以用下列形式指定任何用户的口令：

```
# passwd kuangshen
New password:*******
Re-enter new password:*******
```





为用户指定空口令时，执行下列形式的命令：

```
# passwd -d kuangshen
```

此命令将用户 kuangshen的口令删除，这样用户 kuangshen下一次登录时，系统就不再允许该用户登录了。

passwd 命令还可以用 -l(lock) 选项锁定某一用户，使其不能登录，例如：

```
# passwd -l kuangshen
```